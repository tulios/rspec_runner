#!/usr/bin/env ruby

$LOAD_PATH.unshift(File.join(File.dirname(__FILE__), '..', 'lib'))
require 'rspec_runner'

config = RSpecRunner::Config.new(ARGV)
app = RSpecRunner::App.new(config)
app.start!

puts "Running: #{config.options.execute}\n"

puts "Files: #{app.files.inspect}"
puts "Examples: #{app.examples.inspect}" unless app.examples.empty?
puts ""

RSpecRunner.delete_old_outputs
output = RSpecRunner.get_output

puts "output: #{output.path}"

RSpecRunner.run_file_list(app.files, app.examples, output)
RSpecRunner::Opener.open(output.path)

# RSpecRunner::Opener.open(output)
#sleep(5)